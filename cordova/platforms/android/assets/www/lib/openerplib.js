var openerplib={};openerplib.json_rpc=function(a,g,e,f){var d={jsonrpc:"2.0",params:e,id:Math.floor((Math.random()*1000000000)+1)};if(g){d.method=g}var c=new XMLHttpRequest();c.open("POST",a,true);c.setRequestHeader("Content-Type","application/json");c.onreadystatechange=function(){if(c.readyState!==4||!f){return}var i=c.getResponseHeader("Content-Type");if(c.status!==200){f("Offline",null)}else{if(i.indexOf("application/json")!==0){f('Expected JSON encoded response, found "'+i+'"',null)}else{var h=JSON.parse(this.responseText);f(h.error||null,h.result||null)}}};c.ontimeout=function(){f("Timeout",null)};try{c.send(JSON.stringify(d))}catch(b){f(b,null)}};openerplib.Service=function(c,b){var a=this;this.con=c;this.service=b;this.exec=function(e,f,d){a.con.send(a.service,e,f,d)}};openerplib.Model=function(b,a){var c=this;this.service=new openerplib.Service(b,"object");this.con=b;this.model=a;this.exec=function(e,f,g,d){c.service.exec("execute_kw",[b.database,b.user_id,b._password,c.model,e,f,g],d)}};openerplib.JsonRPCConnector=function(c,d,a,b,e){var f=this;this._url=c;this._url_jsonrpc=c+"/jsonrpc";this._password=b;this.login=a;this.database=d;this.user_id=e;this.session_id=null;this.user_context=null;this.authenticate=function(h){var g={db:f.database,login:f.login,password:f._password};var i=f._url+"/web/session/authenticate";openerplib.json_rpc(i,null,g,function(k,j){if(k===null){f.session_id=j.session_id;f.user_id=j.uid;f.user_context=j.user_context}if(h){h(k,j)}})};this.send=function(j,h,i,g){openerplib.json_rpc(f._url_jsonrpc,"call",{service:j,method:h,args:i},g)};this.get_service=function(g){return new openerplib.Service(f,g)};this.get_model=function(g){return new openerplib.Model(f,g)}};openerplib.get_connection=function(d,f,a,e,g,c){if(!a){a=8069}var b=d+":"+a.toString();switch(f){case"jsonrpcs":b="https://"+b;break;default:b="http://"+b;break}return new openerplib.JsonRPCConnector(b,e,g,c,null)};